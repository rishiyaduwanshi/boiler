name "boiler"
bin "bl"
about "A CLI tool to manage reusable code snippets and stacks across multiple programming languages"
author "Abhinav Prakash"
version "0.0.1"

// Main command - shows banner and basic info
cmd {
  about "Display banner with basic commands and version info"
}

// Version command
flag "-v" "--version" {
  about "Show version of boiler"
}

// Help command
flag "-h" "--help" {
  about "Show help information"
}

// Configuration commands
cmd "conf" {
  about "Manage boiler configuration"
  
  flag "-e" "--edit" {
    about "Edit configuration in default editor"
  }
  
  flag "-r" "--reset" {
    about "Reset configuration to defaults (uses boiler.conf.json.bk backup)"
  }
  
  flag "-s" "--show" {
    about "Display current configuration"
  }
}

// Clean commands
cmd "clean" {
  about "Clean snippets, stacks, or entire store"
  
  flag "-a" "--all" {
    about "Clean everything (with confirmation)"
  }
  
  flag "-sn" "--snippets" {
    about "Clean all snippets"
  }
  
  flag "-st" "--stacks" {
    about "Clean all stacks"
  }
  
  flag "-s" "--store" {
    about "Clean entire store"
  }
  
  arg "resource" {
    about "Specific resource to clean (e.g., express@1, errorHandler@1.js)"
  }
}

// List commands
cmd "ls" {
  about "List available snippets or stacks"
  
  flag "-sn" "--snippets" {
    about "List all snippets"
  }
  
  flag "-st" "--stacks" {
    about "List all stacks"
  }
  
  flag "-a" "--all" {
    about "List both snippets and stacks"
  }
}

// Path command
cmd "path" {
  about "Show boiler installation path"
}

// Self-update command
cmd "self-update" {
  about "Update boiler to the latest version"
}

// Self-uninstall command
cmd "self-uninstall" {
  about "Uninstall boiler completely"
  
  flag "-y" "--yes" {
    about "Skip confirmation and clean everything"
  }
  
  flag "-k" "--keep-store" {
    about "Keep store while uninstalling"
  }
}

// Add command - add snippets or stacks
cmd "add" {
  about "Add a snippet or stack to current directory"
  
  arg "resource" {
    about "Resource to add (e.g., express@1, errorHandler@1.js, git-url)"
    required true
  }
  
  flag "-r" "--remote" {
    about "Fetch resource from remote registry"
  }
  
  flag "-t" "--to" {
    about "Destination path (relative or absolute)"
    arg "path" {
      about "Target directory path"
    }
  }
  
  flag "-g" "--global" {
    about "Add remote resource to global store"
  }
  
  flag "-b" "--both" {
    about "Add to both local directory and global store"
  }
  
  flag "-f" "--force" {
    about "Force overwrite if resource already exists"
  }
}

// Store command - save current folder or file as snippet/stack
cmd "store" {
  about "Store a folder/file as a snippet or stack"
  
  arg "path" {
    about "Path to folder/file to store (use . for current directory)"
    default "."
  }
  
  flag "-n" "--name" {
    about "Name for the stored resource"
    arg "name" {
      about "Resource name with optional version (e.g., mystack@1)"
    }
  }
  
  flag "-t" "--type" {
    about "Type of resource (snippet or stack)"
    arg "type" {
      about "Either 'snippet' or 'stack'"
    }
  }
  
  flag "-d" "--description" {
    about "Description of the resource"
    arg "desc" {
      about "Resource description"
    }
  }
}

// Info command - show details about a resource
cmd "info" {
  about "Show detailed information about a snippet or stack"
  
  arg "resource" {
    about "Resource name (e.g., express@1, errorHandler@1.js)"
    required true
  }
}

// Search command
cmd "search" {
  about "Search for snippets or stacks"
  
  arg "query" {
    about "Search query"
    required true
  }
  
  flag "-sn" "--snippets" {
    about "Search only in snippets"
  }
  
  flag "-st" "--stacks" {
    about "Search only in stacks"
  }
  
  flag "-r" "--remote" {
    about "Search in remote registry"
  }
}

// Init command - initialize boiler in current directory
cmd "init" {
  about "Initialize boiler configuration in current directory"
  
  flag "-g" "--global" {
    about "Initialize global configuration"
  }
}

// Examples
example "Show help" {
  cmd "bl --help"
}

example "Add express stack to current directory" {
  cmd "bl add express@1"
}

example "Add snippet from remote registry" {
  cmd "bl add errorHandler@1.js --remote"
}

example "Add stack to specific path" {
  cmd "bl add express@1 --to ./backend"
}

example "Store current directory as a stack" {
  cmd "bl store . --name myapp@1 --type stack"
}

example "List all snippets" {
  cmd "bl ls --snippets"
}

example "Clean specific stack" {
  cmd "bl clean express@1"
}

example "Edit configuration" {
  cmd "bl conf --edit"
}

example "Search for error handling snippets" {
  cmd "bl search error"
}
